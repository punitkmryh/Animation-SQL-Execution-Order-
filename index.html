<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Execution: Employee Salaries</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1e293b', // Custom dark shade
                            950: '#020617',
                        },
                        indigo: {
                            450: '#6366f1',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f1f5f9;
        }

        /* Smooth transitions */
        .fade-enter { opacity: 0; transform: translateY(10px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: opacity 300ms, transform 300ms; }
        .fade-exit { opacity: 1; transform: translateY(0); }
        .fade-exit-active { opacity: 0; transform: translateY(-10px); transition: opacity 300ms, transform 300ms; }

        .row-animate { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        
        .strike-through {
            text-decoration: line-through;
            opacity: 0.5;
            background-color: rgba(220, 38, 38, 0.1) !important;
            color: #f87171 !important;
        }

        .highlight-row {
            background-color: rgba(30, 58, 138, 0.6) !important;
            border-left: 4px solid #60a5fa;
        }

        .dim-row { opacity: 0.25; filter: grayscale(100%); }

        /* Glassmorphism utilities */
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .glass-header {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #475569; border-radius: 99px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #64748b; }
    </style>
</head>
<body class="bg-slate-950 min-h-screen selection:bg-indigo-500/30 selection:text-indigo-200">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- Icons ---
        const Icon = ({ path, className = "w-5 h-5" }) => (
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const icons = {
            database: <Icon path={<><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></>} />,
            filter: <Icon path={<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>} />,
            group: <Icon path={<><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></>} />,
            calculator: <Icon path={<><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="16" y1="14" x2="16" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></>} />,
            sort: <Icon path={<><line x1="12" y1="5" x2="12" y2="19"/><polyline points="19 12 12 19 5 12"/></>} />,
            scissors: <Icon path={<><circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" y1="4" x2="8.12" y2="15.88"/><line x1="14.47" y1="14.48" x2="20" y2="20"/><line x1="8.12" y1="8.12" x2="12" y2="12"/></>} />,
            chevronRight: <Icon path={<polyline points="9 18 15 12 9 6"/>} />,
            chevronLeft: <Icon path={<polyline points="15 18 9 12 15 6"/>} />,
            info: <Icon path={<><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></>} />,
            check: <Icon path={<polyline points="20 6 9 17 4 12"/>} className="w-4 h-4" />
        };

        // --- Data ---
        const departments = [
            { id: 'D1', name: 'Engineering' },
            { id: 'D2', name: 'Sales' },
            { id: 'D3', name: 'Marketing' }
        ];

        const employees = [
            { id: 1, name: 'Alice', dept_id: 'D1', salary: 6200 },
            { id: 2, name: 'Bob',   dept_id: 'D1', salary: 4000 },
            { id: 3, name: 'Charlie', dept_id: 'D2', salary: 7500 },
            { id: 4, name: 'David', dept_id: 'D2', salary: 2500 },
            { id: 5, name: 'Eve',   dept_id: 'D2', salary: 7000 },
            { id: 6, name: 'Frank', dept_id: 'D3', salary: 3200 },
            { id: 7, name: 'Grace', dept_id: 'D3', salary: 3100 }
        ];

        const WHERE_THRESHOLD = 3000;
        const HAVING_THRESHOLD = 5000;

        // --- Steps Configuration ---
        const steps = [
            {
                id: 'init',
                title: 'Data Sources',
                subtitle: 'Raw Tables',
                desc: 'We start with two raw tables: "Employees" and "Departments".',
                icon: icons.database,
                queryHighlight: []
            },
            {
                id: 'from_join',
                title: 'FROM & JOIN',
                subtitle: 'Merge Tables',
                desc: 'Data is retrieved from Employees and joined with Departments on matching IDs.',
                icon: icons.database,
                queryHighlight: [1, 2, 3]
            },
            {
                id: 'where',
                title: 'WHERE',
                subtitle: 'Filter Rows',
                desc: `Rows with Salary ≤ ${WHERE_THRESHOLD} are removed immediately. David ($2500) is filtered out.`,
                icon: icons.filter,
                queryHighlight: [4]
            },
            {
                id: 'group_by',
                title: 'GROUP BY',
                subtitle: 'Aggregate Data',
                desc: 'Remaining rows are grouped by Department Name. We calculate aggregates (AVG Salary) for each group.',
                icon: icons.group,
                queryHighlight: [5]
            },
            {
                id: 'having',
                title: 'HAVING',
                subtitle: 'Filter Groups',
                desc: `Groups with AVG Salary ≤ ${HAVING_THRESHOLD} are removed. Marketing avg is too low, so it's removed.`,
                icon: icons.filter,
                queryHighlight: [6]
            },
            {
                id: 'select',
                title: 'SELECT',
                subtitle: 'Select Columns',
                desc: 'We finally select the Department Name and the calculated Average Salary.',
                icon: icons.calculator,
                queryHighlight: [0]
            },
            {
                id: 'order_by',
                title: 'ORDER BY',
                subtitle: 'Sort Results',
                desc: 'Results are sorted by Average Salary in Descending order.',
                icon: icons.sort,
                queryHighlight: [7]
            },
            {
                id: 'limit',
                title: 'LIMIT',
                subtitle: 'Trim Results',
                desc: 'We Skip 0 rows and Take 2 rows. Since only 2 groups remain, both are kept.',
                icon: icons.scissors,
                queryHighlight: [8]
            }
        ];

        // --- Components ---

        const StepIndicator = ({ currentIdx, total }) => {
            return (
                <div className="flex items-center gap-1 mb-6">
                    {Array.from({ length: total }).map((_, idx) => (
                        <div 
                            key={idx}
                            className={`h-1.5 rounded-full transition-all duration-500 ${
                                idx <= currentIdx ? 'bg-indigo-500 flex-1' : 'bg-slate-700 w-2'
                            }`}
                        />
                    ))}
                </div>
            );
        };

        const CodeDisplay = ({ activeLines }) => {
            const lines = [
                { id: 0, text: "SELECT D.name, AVG(E.salary) as avg_sal" },
                { id: 1, text: "FROM Employees E" },
                { id: 2, text: "JOIN Departments D" },
                { id: 3, text: "  ON E.dept_id = D.id" },
                { id: 4, text: `WHERE E.salary > ${WHERE_THRESHOLD}` },
                { id: 5, text: "GROUP BY D.name" },
                { id: 6, text: `HAVING AVG(E.salary) > ${HAVING_THRESHOLD}` },
                { id: 7, text: "ORDER BY avg_sal DESC" },
                { id: 8, text: "LIMIT 2 OFFSET 0;" }
            ];

            return (
                <div className="glass-panel rounded-xl overflow-hidden flex flex-col h-full shadow-lg border border-slate-700/50">
                    <div className="glass-header px-4 py-3 flex items-center justify-between">
                        <span className="text-xs font-bold text-slate-400 uppercase tracking-widest">SQL Query</span>
                        <div className="flex gap-1.5">
                            <div className="w-2.5 h-2.5 rounded-full bg-red-500/20 border border-red-500/50"></div>
                            <div className="w-2.5 h-2.5 rounded-full bg-amber-500/20 border border-amber-500/50"></div>
                            <div className="w-2.5 h-2.5 rounded-full bg-green-500/20 border border-green-500/50"></div>
                        </div>
                    </div>
                    <div className="p-4 font-mono text-sm overflow-x-auto custom-scroll bg-slate-900/50 flex-1">
                        {lines.map((line, idx) => {
                            const isActive = activeLines.includes(idx);
                            return (
                                <div 
                                    key={idx} 
                                    className={`relative flex items-center py-1 transition-all duration-300 rounded ${
                                        isActive ? 'bg-indigo-500/10 text-indigo-300' : 'text-slate-500'
                                    }`}
                                >
                                    {isActive && <div className="absolute left-0 w-0.5 h-full bg-indigo-500 rounded-r"></div>}
                                    <span className={`w-8 text-right mr-4 text-xs select-none ${isActive ? 'text-indigo-500' : 'text-slate-700'}`}>{idx + 1}</span>
                                    <span className={`${isActive ? 'font-semibold' : 'opacity-80'}`}>{line.text}</span>
                                </div>
                            )
                        })}
                    </div>
                </div>
            );
        };

        const TableCard = ({ title, children, headerRight }) => (
            <div className="glass-panel rounded-xl overflow-hidden flex flex-col h-full animate-in fade-in duration-500">
                <div className="glass-header px-5 py-3 border-b border-slate-800 flex justify-between items-center">
                    <h3 className="text-sm font-semibold text-slate-200 uppercase tracking-wide flex items-center gap-2">
                        {title}
                    </h3>
                    {headerRight}
                </div>
                <div className="overflow-x-auto custom-scroll flex-1">
                    {children}
                </div>
            </div>
        );

        const StatusBadge = ({ type }) => {
            const styles = {
                active: "bg-emerald-500/10 text-emerald-400 border-emerald-500/20",
                removed: "bg-red-500/10 text-red-400 border-red-500/20 line-through opacity-70",
                selected: "bg-indigo-500/10 text-indigo-400 border-indigo-500/20"
            };
            
            const labels = {
                active: "Active",
                removed: "Removed",
                selected: "Selected"
            }

            return (
                <span className={`px-2 py-0.5 rounded text-[10px] font-medium border ${styles[type] || styles.active} uppercase tracking-wider`}>
                    {labels[type] || type}
                </span>
            );
        }

        const DataVisualizer = ({ stepId }) => {
            const joinedData = useMemo(() => {
                return employees.map(e => {
                    const dept = departments.find(d => d.id === e.dept_id);
                    return { ...e, dept_name: dept ? dept.name : 'Unknown' };
                });
            }, []);

            const groupedData = useMemo(() => {
                const filtered = joinedData.filter(e => e.salary > WHERE_THRESHOLD);
                const groups = {};
                filtered.forEach(e => {
                    if (!groups[e.dept_name]) groups[e.dept_name] = { rows: [], totalSal: 0, count: 0 };
                    groups[e.dept_name].rows.push(e);
                    groups[e.dept_name].totalSal += e.salary;
                    groups[e.dept_name].count += 1;
                });
                return Object.keys(groups).map(name => ({
                    name,
                    avg: groups[name].totalSal / groups[name].count,
                    rows: groups[name].rows
                }));
            }, [joinedData]);

            // --- Views ---

            if (stepId === 'init') {
                return (
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 h-full">
                        <TableCard title="Employees Table">
                            <table className="w-full text-sm text-left">
                                <thead className="text-xs text-slate-500 uppercase bg-slate-900/30">
                                    <tr><th className="px-4 py-3">Name</th><th className="px-4 py-3">Dept_ID</th><th className="px-4 py-3 text-right">Salary</th></tr>
                                </thead>
                                <tbody className="divide-y divide-slate-800/50">
                                    {employees.map(e => (
                                        <tr key={e.id} className="hover:bg-slate-800/30 transition-colors">
                                            <td className="px-4 py-2.5 font-medium text-slate-300">{e.name}</td>
                                            <td className="px-4 py-2.5 text-slate-500 font-mono">{e.dept_id}</td>
                                            <td className="px-4 py-2.5 text-right font-mono text-emerald-400">${e.salary}</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </TableCard>
                        <div className="h-fit">
                            <TableCard title="Departments Table">
                                <table className="w-full text-sm text-left">
                                    <thead className="text-xs text-slate-500 uppercase bg-slate-900/30">
                                        <tr><th className="px-4 py-3">ID</th><th className="px-4 py-3">Name</th></tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-800/50">
                                        {departments.map(d => (
                                            <tr key={d.id} className="hover:bg-slate-800/30 transition-colors">
                                                <td className="px-4 py-2.5 text-slate-500 font-mono">{d.id}</td>
                                                <td className="px-4 py-2.5 text-slate-300">{d.name}</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </TableCard>
                        </div>
                    </div>
                );
            }

            if (stepId === 'from_join' || stepId === 'where') {
                return (
                    <TableCard title="Working Dataset" headerRight={<span className="text-xs text-slate-500">{joinedData.length} Rows</span>}>
                        <table className="w-full text-sm text-left">
                            <thead className="text-xs text-slate-500 uppercase bg-slate-900/30">
                                <tr>
                                    <th className="px-4 py-3">Name</th>
                                    <th className="px-4 py-3">Dept</th>
                                    <th className="px-4 py-3 text-right">Salary</th>
                                    <th className="px-4 py-3 text-right">Status</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-slate-800/50">
                                {joinedData.map(row => {
                                    const isFiltered = stepId === 'where' && row.salary <= WHERE_THRESHOLD;
                                    return (
                                        <tr key={row.id} className={`row-animate group ${isFiltered ? 'bg-red-500/5' : 'hover:bg-slate-800/30'}`}>
                                            <td className={`px-4 py-3 font-medium ${isFiltered ? 'text-slate-500 line-through decoration-slate-600' : 'text-slate-200'}`}>{row.name}</td>
                                            <td className={`px-4 py-3 ${isFiltered ? 'opacity-50' : 'text-indigo-300'}`}>{row.dept_name}</td>
                                            <td className={`px-4 py-3 text-right font-mono ${isFiltered ? 'opacity-50 text-red-400' : 'text-emerald-400'}`}>${row.salary}</td>
                                            <td className="px-4 py-3 text-right">
                                                <StatusBadge type={isFiltered ? 'removed' : 'active'} />
                                            </td>
                                        </tr>
                                    );
                                })}
                            </tbody>
                        </table>
                    </TableCard>
                );
            }

            if (stepId === 'group_by' || stepId === 'having') {
                return (
                    <TableCard title="Grouped Data" headerRight={<span className="text-xs text-slate-500">Aggregated by Dept</span>}>
                        <div className="p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                            {groupedData.map(group => {
                                const isHavingFiltered = stepId === 'having' && group.avg <= HAVING_THRESHOLD;
                                return (
                                    <div key={group.name} className={`relative rounded-xl border p-4 transition-all duration-500 ${isHavingFiltered ? 'border-red-500/20 bg-red-500/5' : 'border-indigo-500/30 bg-indigo-500/5'}`}>
                                        <div className="flex justify-between items-start mb-4">
                                            <div>
                                                <h4 className={`text-lg font-bold ${isHavingFiltered ? 'text-slate-500' : 'text-indigo-400'}`}>{group.name}</h4>
                                                <div className="text-xs text-slate-500 mt-1">{group.rows.length} Employees</div>
                                            </div>
                                            <div className="text-right">
                                                <div className="text-[10px] uppercase text-slate-500 font-bold tracking-wider">Avg Salary</div>
                                                <div className={`text-xl font-mono font-bold ${isHavingFiltered ? 'text-red-400 line-through decoration-red-500/50' : 'text-emerald-400'}`}>
                                                    ${Math.round(group.avg)}
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="space-y-1.5 bg-slate-900/50 rounded-lg p-2.5">
                                            {group.rows.map(r => (
                                                <div key={r.id} className="flex justify-between text-xs px-1">
                                                    <span className="text-slate-400">{r.name}</span>
                                                    <span className="text-slate-500 font-mono">${r.salary}</span>
                                                </div>
                                            ))}
                                        </div>
                                        
                                        {isHavingFiltered && (
                                            <div className="absolute inset-0 flex items-center justify-center bg-slate-900/10 backdrop-blur-[1px] rounded-xl">
                                                <span className="bg-red-500/20 text-red-400 border border-red-500/30 px-3 py-1 rounded-full text-xs font-bold shadow-lg backdrop-blur-md">
                                                    Removed (Avg &le; {HAVING_THRESHOLD})
                                                </span>
                                            </div>
                                        )}
                                    </div>
                                )
                            })}
                        </div>
                    </TableCard>
                );
            }

            if (stepId === 'select' || stepId === 'order_by' || stepId === 'limit') {
                let finalData = groupedData.filter(g => g.avg > HAVING_THRESHOLD);
                if (stepId === 'order_by' || stepId === 'limit') {
                    finalData.sort((a,b) => b.avg - a.avg);
                }

                return (
                    <TableCard title="Final Result Set">
                        <table className="w-full text-sm text-left">
                            <thead className="text-xs text-slate-500 uppercase bg-slate-900/30">
                                <tr>
                                    <th className="px-6 py-4">Department Name</th>
                                    <th className="px-6 py-4 text-right">Average Salary</th>
                                    {stepId === 'limit' && <th className="px-6 py-4 text-right">Status</th>}
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-slate-800/50">
                                {finalData.map((row, idx) => {
                                    const isSelected = stepId === 'limit'; 
                                    return (
                                        <tr key={row.name} className={`row-animate ${isSelected ? 'highlight-row bg-indigo-500/5' : 'hover:bg-slate-800/30'}`}>
                                            <td className="px-6 py-4 font-semibold text-slate-200">{row.name}</td>
                                            <td className="px-6 py-4 text-right font-mono text-lg text-emerald-400">${Math.round(row.avg)}</td>
                                            {stepId === 'limit' && (
                                                <td className="px-6 py-4 text-right">
                                                    <StatusBadge type="selected" />
                                                </td>
                                            )}
                                        </tr>
                                    );
                                })}
                            </tbody>
                        </table>
                        
                        <div className="p-6">
                            <div className="flex items-start gap-3 p-4 bg-indigo-900/20 border border-indigo-500/20 rounded-lg text-sm text-indigo-200">
                                {icons.info}
                                <div>
                                    <strong className="block mb-1 text-indigo-300">Transformation Complete</strong>
                                    We started with individual employee records and transformed them into departmental aggregates, filtered by logic, and sorted by value.
                                </div>
                            </div>
                        </div>
                    </TableCard>
                );
            }
            return null;
        };

        const App = () => {
            const [stepIdx, setStepIdx] = useState(0);
            const currentStep = steps[stepIdx];

            // Keyboard navigation
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'ArrowRight') setStepIdx(prev => Math.min(steps.length - 1, prev + 1));
                    if (e.key === 'ArrowLeft') setStepIdx(prev => Math.max(0, prev - 1));
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, []);

            return (
                <div className="max-w-7xl mx-auto p-4 lg:p-8 min-h-screen flex flex-col font-sans">
                    {/* Top Header */}
                    <div className="mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4">
                        <div>
                            <h1 className="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-indigo-300 mb-2">
                                SQL Execution Order
                            </h1>
                            <p className="text-slate-400 text-sm">Interactive visualization of aggregation, filtering, and sorting logic.</p>
                        </div>
                        <div className="flex gap-2">
                            <button 
                                onClick={() => setStepIdx(Math.max(0, stepIdx - 1))}
                                disabled={stepIdx === 0}
                                className="group flex items-center gap-2 px-5 py-2.5 rounded-full bg-slate-800 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all border border-slate-700"
                            >
                                {icons.chevronLeft} <span className="hidden sm:inline font-medium">Previous</span>
                            </button>
                            <button 
                                onClick={() => setStepIdx(Math.min(steps.length - 1, stepIdx + 1))}
                                disabled={stepIdx === steps.length - 1}
                                className="group flex items-center gap-2 px-5 py-2.5 rounded-full bg-indigo-600 hover:bg-indigo-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-indigo-900/20"
                            >
                                <span className="hidden sm:inline font-medium">Next Step</span> {icons.chevronRight}
                            </button>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-6 flex-1 items-start">
                        
                        {/* LEFT COLUMN: Controls & Explanation */}
                        <div className="lg:col-span-4 flex flex-col gap-6 sticky top-6">
                            
                            <div className="glass-panel p-6 rounded-2xl">
                                <StepIndicator currentIdx={stepIdx} total={steps.length} />
                                
                                <div className="mb-6 animate-in slide-in-from-left-4 fade-in duration-300" key={currentStep.id}>
                                    <div className="flex items-center gap-3 mb-2 text-indigo-400">
                                        <div className="p-2 bg-indigo-500/10 rounded-lg border border-indigo-500/20">
                                            {currentStep.icon}
                                        </div>
                                        <div>
                                            <span className="text-xs font-bold text-indigo-500 uppercase tracking-wider">{currentStep.subtitle}</span>
                                            <h2 className="text-2xl font-bold text-slate-100">{currentStep.title}</h2>
                                        </div>
                                    </div>
                                    <p className="text-slate-400 leading-relaxed text-sm mt-4 pl-1 border-l-2 border-slate-700">
                                        {currentStep.desc}
                                    </p>
                                </div>
                            </div>

                            <div className="h-[400px]">
                                <CodeDisplay activeLines={currentStep.queryHighlight} />
                            </div>
                        </div>

                        {/* RIGHT COLUMN: Visualization */}
                        <div className="lg:col-span-8 h-full min-h-[500px]">
                             <DataVisualizer stepId={currentStep.id} />
                        </div>

                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
